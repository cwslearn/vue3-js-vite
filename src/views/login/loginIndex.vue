<template>  <a-form    v-bind="formItemLayout"    ref="loginformRef"    :model="formState"    name="normal_login"    class="login-form"    @finish="onFinish"    @finishFailed="onFinishFailed"  >    <a-form-item :label="formTitle"> </a-form-item>    <a-form-item      label="用户名"      name="username"      :rules="[{ required: true, message: '请输入用户名！' }]"    >      <a-input        v-model:value="formState.username"        placeholder="请输入用户名"      >        <template #prefix>          <UserOutlined class="site-form-item-icon" />        </template>      </a-input>    </a-form-item>    <a-form-item      label="密码"      name="password"      :rules="[{ required: true, message: '请输入密码！' }]"    >      <a-input-password        v-model:value="formState.password"        placeholder="请输入密码"      >        <template #prefix>          <LockOutlined class="site-form-item-icon" />        </template>      </a-input-password>    </a-form-item>    <a-form-item class="btn-form-item">      <a-button        type="primary"        class="login-form-button"        @click="handleSubmit"      >        {{ formTitle }}      </a-button>    </a-form-item>  </a-form></template><script setup>import { reactive, ref, watch, onMounted } from 'vue'import { UserOutlined, LockOutlined } from '@ant-design/icons-vue'import { useRouter, useRoute } from 'vue-router'import { message, cryptoSet } from '@utils/globalFun'import { userStore } from '@/stores/index.js'import apis from '@http/index'const user_store = userStore()let route = useRoute()let router = useRouter()let formTitle = ref('')const loginformRef = ref()const formState = reactive({  username: '',  password: ''})const formItemLayout = {  labelCol: {    span: 4  },  wrapperCol: {    span: 18  }}// 根据路由处理formTitleconst handleFormTitle = path => {  if (path.includes('login')) {    formTitle.value = '登录'  }  if (path.includes('register')) {    formTitle.value = '注册'  }}onMounted(() => {  let path = route.path  handleFormTitle(path)})watch(  () => route.path,  path => {    handleFormTitle(path)    loginformRef.value.resetFields()  })const onFinish = values => {  console.log('Success:', values)}const onFinishFailed = errorInfo => {  console.log('Failed:', errorInfo)}const handleSubmit = async () => {  console.log(formState)  let { username, password } = formState  if (!username) {    message.error('请输入用户名！')  }  if (!password) {    message.error('请输入密码！')  }  if (username && password) {    let params = {      username,      password: cryptoSet(password)    }    try {      let path = route.path      let res = ''      if (path.includes('login')) {        res = await apis.userLogin(params)      }      if (path.includes('register')) {        res = await apis.userRegister(params)      }      if (res.code === 200 && res.data) {        let data = res.data        user_store.userInfo = data        localStorage.setItem('userInfo', JSON.stringify(data))        router.push('/home')      }    } catch (error) {      console.log(error)    }  }}</script><style lang="scss">.login-form {  width: 50%;  max-width: 500px;  position: absolute;  left: 50%;  top: 50%;  transform: translate(-50%, -50%);  background: #fff;  padding: 30px 20px;  border-radius: 10px;  .login-form-button {    width: 100%;    margin-left: 15%;    border-radius: 4px;  }  .register-form-button {    margin-left: 40%;    border-radius: 4px;    &:hover {      border: 1px solid #333;    }  }}</style>