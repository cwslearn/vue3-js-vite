<template>  <div class="box-home">    <div class="box-home-main">      <section        class="box-list-hor"        v-for="item in list.data"        :key="item._id"      >        <!-- <div class="box-list-hor-image" v-if="item.imagurl">          <a-image :src="item.imagurl" />        </div> -->        <div class="box-list-hor-content">          <div            class="box-list-hor-content-title"            @click.stop="handleClick('detail', item)"          >            {{ item.title }}          </div>          <div            class="box-list-hor-content-detail text-ellipsis-multiline"            @click.stop="handleClick('detail', item)"          >            {{ item.content }}          </div>          <div class="box-list-hor-content-msg">            <div class="box-list-hor-content-msg-left">              <div                class="left-dot"                @click.stop="handleClick('looks', item)"              >                <fire-outlined /><span>{{ item.looks }}</span>              </div>              <div                class="left-dot"                @click.stop="handleClick('likes', item)"              >                <heart-outlined /><span>{{ item.likes }}</span>              </div>            </div>            <div class="box-list-hor-content-msg-right">              <field-time-outlined /><span>{{ item.time }}</span>            </div>          </div>        </div>      </section>    </div>    <div class="box-home-side">      <div class="card">        <div class="card-title"><fire-outlined class="icon-sort" />热榜</div>        <div class="card-ul">          <div            class="card-li"            v-for="(item, index) in list.looks"            :key="item._id"            @click="handleClick('detail', item)"          >            <span class="list-sort">{{ index + 1 }}</span> {{ item.title }}          </div>        </div>      </div>      <div class="card">        <div class="card-title"><heart-outlined class="icon-sort" />赞榜</div>        <div class="card-ul">          <div            class="card-li"            v-for="(item, index) in list.likes"            :key="item._id"            @click="handleClick('detail', item)"          >            <span class="list-sort">{{ index + 1 }}</span> {{ item.title }}          </div>        </div>      </div>    </div>  </div></template><script setup>import { onMounted, reactive } from 'vue'import apis from '@http/index'import { useRouter } from 'vue-router'import { message, timeFormatYMDhms } from '@utils/globalFun'import {  FieldTimeOutlined,  FireOutlined,  HeartOutlined} from '@ant-design/icons-vue'const router = new useRouter()let list = reactive({  data: [],  looks: [],  likes: []})const handleClick = (type, val) => {  if (type === 'detail') {    localStorage.setItem('article', JSON.stringify(val))    router.push('/article/' + val._id)  } else if (type === 'looks' || type === 'likes') {    handleUpdate(type, val._id)  }}const handleGet = async () => {  try {    let res = await apis.sendGet()    if (res.code === 200 && res.data) {      res.data.forEach(item => {        item.time = item.createTime          ? timeFormatYMDhms(item.createTime)          : item.createTime        // if (item.image && item.image.length) {        //   item.imagurl = 'http://localhost:9000' + item.image[0]        // }      })      list.data = res.data    } else {      message.error(res.message)    }  } catch (error) {    message.error(error)  }}const handleUpdate = async (type = 'looks', id) => {  try {    if (!id) {      return    }    let res = await apis.articleBySelf({      type,      _id: id    })    if (res.code === 200 && res.data) {      list.data.map((item, index) => {        if (item._id === id) {          list.data[index] = {            ...item,            [type]: res.data[type]          }        }      })    } else {      console.error(res.message)    }  } catch (error) {    console.error(error)  }}const handleGetLookLike = async type => {  if (!type) {    return  }  try {    let res = await apis.articleSort({ type, typeValue: -1 })    if (res.code === 200 && res.data) {      list[type] = res.data    } else {      console.error(res.message)    }  } catch (err) {    console.log(err)  }}// 获取热榜handleGetLookLike('looks')// 获取高赞handleGetLookLike('likes')onMounted(() => {  // 获取文章列表  handleGet()})</script><style lang="scss">.text-ellipsis-multiline {  display: -webkit-box;  -webkit-line-clamp: 5;  -webkit-box-orient: vertical;  overflow: hidden;  text-overflow: ellipsis;}.box-home {  display: flex;  &-main {    width: 70%;    .box-list-hor {      width: 100%;      margin-bottom: 20px;    }  }  &-side {    flex: 1;  }}.box-list-hor {  height: 200px;  display: flex;  background: #fff;  padding: 10px;  border-radius: 5px;  &:hover {    z-index: 2;    box-shadow: 0 15px 30px rgb(0 0 0 / 10%);    transform: translate3d(0, -2px, 0);    cursor: pointer;  }  &-image {    flex: 1;    height: 100%;    .ant-image {      height: 100%;      object-fit: contain;      max-height: 180px;      img {        height: 100%;        border-radius: 5px;      }      &:hover {        border-radius: 5px;        .ant-image-mask {          border-radius: 5px;        }      }      .ant-image-mask {        border-radius: 5px;      }    }  }  &-content {    width: 60%;    display: flex;    flex-direction: column;    &-title {      overflow: hidden;      text-overflow: ellipsis;      white-space: nowrap;      text-align: center;    }    &-title {      padding: 5px;      font-size: 16px;      font-weight: 700;      height: 40px;    }    &-detail {      padding: 0px 5px;      text-align: center;      height: 120px;    }    &-msg {      height: 40px;      padding: 0 5px;      display: flex;      justify-content: space-between;      align-items: flex-end;      span {        margin-left: 3px;      }      &-left {        display: flex;        .left-dot {          margin-right: 10px;          &:hover {            cursor: pointer;          }        }      }    }  }}.box-home-side {  width: 100%;  display: flex;  flex-direction: column;  .card {    width: 100%;    height: 340px;    margin: 0 auto 20px auto;    // border: 1px solid #fff;    padding-left: 10px;    &-title {      height: 40px;      font-size: 18px;      font-weight: 500;      background-color: #fff;      padding: 0 10px;    }    &-li {      height: 30px;      padding: 0 10px;      background-color: #fff;      line-height: 30px;      // padding: 5px 0;      &:hover {        cursor: pointer;        background-color: #1890ff;        color: #fff;      }    }  }}.icon-sort {  margin-right: 5px;  svg {    color: #f10216;  }}.list-sort {  color: #1890ff;  font-weight: 700;  font-size: 16px;}</style>