<template>  <div    :id="id"    class="cherry-md-box"  ></div></template><script setup>import Cherry from 'cherry-markdown'import 'cherry-markdown/dist/cherry-markdown.min.css'import { ref, onMounted } from 'vue'const props = defineProps({  modelValue: {    type: String,    default: ''  },  knwlgId: {    type: String,    default: ''  },  id: {    type: String,    default: 'markdown-container'  },  type: {    type: String,    default: 'edit&priview'  }})const emits = defineEmits(['update:modelValue', 'setHtml'])const cherrInstance = ref(null)// const loading = ref(false)const defaultConfig = {  emoji: {    useUnicode: true  },  header: {    anchorStyle: 'autonumber'  },  toolbars: {    theme: 'light',    toolbar: [      'bold',      'italic',      'underline',      'strikethrough',      '|',      'color',      'header',      '|',      'list',      'code',      'hr',      {        insert: [          //  'image',          // 'audio',          // 'video',          'link',          'br',          'formula',          'toc',          'table',          'line-table',          'bar-table'          // 'pdf',          // 'word'        ]      },      // 'graph', // 画图      'settings',      // "switchModel",      'togglePreview'    ],    // bubble: [    //   'bold',    //   'italic',    //   'underline',    //   'strikethrough',    //   'sub',    //   'sup',    //   '|',    //   'size',    //   'color'    // ],    sidebar: [],    float: ['h1', 'h2', 'h3', '|', 'checklist', 'quote', 'quickTable', 'code'],    customMenu: []  }}onMounted(() => {  //初始化markDown  initCherryMD()})const initCherryMD = () => {  cherrInstance.value = new Cherry({    id: props.id,    value: props.modelValue,    // fileUpload: fileUpload,    ...defaultConfig,    editor: {      defaultModel: props.type    },    callback: {      afterChange: afterChange,      beforeImageMounted: beforeImageMounted    }  })}// 上传通用接口未实现audioVideo// const fileUpload = (file, callback) => {//   if (file.size / 1024 / 1024 > 200) {//     return proxy.$modal.msgError('请上传200M以内的图片！')//   }//   if (!file.type.includes('image')) {//     return proxy.$modal.msgError('仅支持上传图片！')//   }//   const formData = new FormData()//   formData.append('file', file)//   console.log(file, 'file')//   loading.value = true//   uploadImg(props.knwlgId, formData)//     .then(res => {//       loading.value = false//       callback(//         import.meta.env.VITE_APP_BASE_API +//         '/ekms/images/v1/preview/' +//         res.data.imgId//       )//     })//     .catch(() => {//       loading.value = false//     })// }// 变更事件回调const afterChange = () => {  emits('setHtml', getCherryContent(), getCherryHtml())}// 获取渲染后html内容const getCherryHtml = () => {  const result = cherrInstance.value.getHtml()  return result}// 获取markdown内容const getCherryContent = () => {  const result = cherrInstance.value.getMarkdown()  return result}// 设置markdown内容const setCherryContent = val => {  cherrInstance.value.setMarkdown(val, 1)}// 图片加载回调const beforeImageMounted = (e, src) => {  return { [e]: src }}defineExpose({  getCherryHtml,  setCherryContent})</script><style scoped>.cherry-md-box {  height: 100%;}</style>